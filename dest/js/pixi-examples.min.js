const bpc={};function getParameterByName(e){const i=RegExp(`[?&]${e}=([^&]*)`).exec(window.location.search);return i&&decodeURIComponent(i[1].replace(/\+/g," "))}function getMajorPixiVersion(e){let i=5;return"v"===e.substr(0,1)&&(i=parseInt(e.substr(1,1),10)),i}jQuery(document).ready(e=>{window.onpopstate=function(i){bpc.pixiVersionString=getParameterByName("v")||"dev",bpc.generateIFrameContent(),e(".select-group .select li.selected").removeClass("selected");const t=e(`.select-group .select li[data-val="${bpc.pixiVersionString}"]`);t.addClass("selected"),e(".select-group .select .current").text(t.text()),e(".main-content").animate({scrollTop:0},200)},bpc.allowedVersions=[5],bpc.pixiVersionString=getParameterByName("v")||"dev",bpc.majorPixiVersion=getMajorPixiVersion(bpc.pixiVersionString),bpc.exampleUrl="",bpc.exampleFilename="",bpc.exampleTitle="",bpc.exampleSourceCode="",bpc.exampleRequiredPlugins=[],bpc.exampleValidVersions=[],bpc.editorOptions={mode:"javascript",lineNumbers:!0,styleActiveLine:!0,matchBrackets:!0,viewportMargin:1/0,lineWrapping:!0},bpc.clickType="click",bpc.animTime=.15,bpc.resize=function(){},bpc.scriptsToLoad=["https://cdnjs.cloudflare.com/ajax/libs/gsap/2.0.2/TweenMax.min.js"],bpc.scriptsLoaded=0,bpc.loadScriptsAsync=function(){for(let i=0;i<bpc.scriptsToLoad.length;i++)e.ajax({url:bpc.scriptsToLoad[i],dataType:"script",cache:!0,async:!0,success:bpc.fileLoaded});0===bpc.scriptsToLoad.length&&bpc.loadComplete()},bpc.fileLoaded=function(){bpc.scriptsLoaded++,bpc.scriptsLoaded===bpc.scriptsToLoad.length&&bpc.loadComplete()},bpc.loadComplete=function(){e.getJSON("examples/manifest.json",i=>{const t=Object.keys(i);for(let a=0;a<t.length;a++){let n=`<span class="section" data-section="${t[a]}">${t[a]}</span><ul data-section="${t[a]}">`;const s=i[t[a]];for(let e=0;e<s.length;e++){const i=void 0!==s[e].plugins?s[e].plugins.join(","):"",t=void 0!==s[e].validVersions?s[e].validVersions.join(","):"";n+=`<li data-src="${s[e].entry}" data-plugins="${i}" data-validVersions="${t}">${s[e].title}</li>`}n+="</ul>",e(".main-menu").append(n)}bpc.initNav()}),e.getJSON("https://api.github.com/repos/pixijs/pixi.js/git/refs/tags",i=>{let t=[];bpc.allowedVersions.forEach(e=>{let a=i.filter(i=>0===i.ref.indexOf(`refs/tags/v${e}`));a.length>5&&(a=a.slice(-5)),t=t.concat(a)}),t=t.map(e=>e.ref.replace("refs/tags/",""));for(let i=0;i<t.length;i++)e(".select-group .select ul").append(`<li data-val="${t[i]}">${t[i]}</li>`);e.getJSON("https://api.github.com/repos/pixijs/pixi.js/git/refs/heads",i=>{i=i.filter(e=>0===e.ref.indexOf("refs/heads/next")).map(e=>e.ref.replace("refs/heads/",""));for(let t=0;t<i.length;t++)e(".select-group .select ul").append(`<li data-val="${i[t]}">${i[t]}</li>`);const t=e(`.select-group .select li[data-val="${bpc.pixiVersionString}"]`);t.addClass("selected"),e(".select-group .select .current").text(t.text())})})},bpc.initNav=function(){if(e(".main-menu .section").on(bpc.clickType,function(){e(this).next("ul").slideToggle(250),e(this).toggleClass("open")}),e(".main-menu li").on(bpc.clickType,function(){if(!e(this).hasClass("selected")){e(".main-menu li.selected").removeClass("selected"),e(this).addClass("selected"),bpc.closeMobileNav();const i=`/${e(this).parent().attr("data-section")}/${e(this).attr("data-src")}`;bpc.exampleTitle=e(this).text(),window.location.hash=i,document.title=`${bpc.exampleTitle} - PixiJS Examples`,ga("set",{page:i,title:bpc.exampleTitle}),ga("send","pageview"),bpc.exampleUrl=`examples/js/${e(this).parent().attr("data-section")}/${e(this).attr("data-src")}`,bpc.exampleFilename=e(this).attr("data-src");const t=e(this).attr("data-plugins");bpc.exampleRequiredPlugins=""===t?[]:t.split(",");const a=e(this).attr("data-validVersions");bpc.exampleValidVersions=""===a?[5]:a.split(",").map(e=>parseInt(e,10)),e.ajax({url:`examples/js/${e(this).parent().attr("data-section")}/${e(this).attr("data-src")}`,dataType:"text",success(e){bpc.exampleSourceCode=e,bpc.generateIFrameContent()}})}}),bpc.generateIFrameContent=function(){const i=document.querySelectorAll("iframe");for(let e=0;e<i.length;e++)i[e].parentNode.removeChild(i[e]);e("#example").html('<iframe id="preview" src="blank.html"></iframe>'),e(".CodeMirror").remove(),e(".main-content #code").html(bpc.exampleSourceCode);let t="",a="<!DOCTYPE html><html><head><style>";a+="body,html{margin:0px;height:100%;overflow:hidden;}canvas{width:100%;height:100%;}",a+="</style></head><body>",a+='<script src="https://code.jquery.com/jquery-3.3.1.min.js"><\/script>',a+=`<script src="${t="local"===bpc.pixiVersionString?"dist/pixi.js":3===bpc.majorPixiVersion?`https://cdn.rawgit.com/GoodBoyDigital/pixi.js/${bpc.pixiVersionString}/bin/pixi.js`:`https://d157l7jdn8e5sf.cloudfront.net/${bpc.pixiVersionString}/pixi.js`}"><\/script>`,bpc.majorPixiVersion<5&&(a+='<script src="pixi-plugins/pixi-legacy.js"><\/script>');for(let e=0;e<bpc.exampleRequiredPlugins.length;e++)a+=`<script src="pixi-plugins/${bpc.exampleRequiredPlugins[e]}.js"><\/script>`;bpc.editor=CodeMirror.fromTextArea(document.getElementById("code"),bpc.editorOptions),bpc.exampleRequiredPlugins.length?e("#code-header").text(`Example Code (plugins used: ${bpc.exampleRequiredPlugins.toString()})`):e("#code-header").text("Example Code"),!bpc.exampleValidVersions.length||bpc.exampleValidVersions.indexOf(bpc.majorPixiVersion)>-1?(e("#example-title").html(bpc.exampleTitle),a+=`<script>window.onload = function(){${bpc.exampleSourceCode}}<\/script></body></html>`,e(".example-frame").show()):(e("#example-title").html(`${bpc.exampleTitle}<br><br><br><br><br><br><br>`+"The selected version of PixiJS does not work with this example.<br><br>"+`Selected version: v${bpc.majorPixiVersion}<br><br>`+`Required version: v${bpc.exampleValidVersions.toString()}<br><br><br><br><br>`),e(".example-frame").hide());const n=document.getElementById("preview"),s=n.contentDocument||n.contentWindow.document;s.open(),s.write(a),s.close()},bpc.openMobileNav=function(){TweenMax.to("#line1",bpc.animTime,{y:0,ease:Linear.easeNone}),TweenMax.to("#line2",0,{alpha:0,ease:Linear.easeNone,delay:bpc.animTime}),TweenMax.to("#line3",bpc.animTime,{y:0,ease:Linear.easeNone}),TweenMax.to("#line1",bpc.animTime,{rotation:45,ease:Quart.easeOut,delay:bpc.animTime}),TweenMax.to("#line3",bpc.animTime,{rotation:-45,ease:Quart.easeOut,delay:bpc.animTime}),e(".main-nav").addClass("mobile-open")},bpc.closeMobileNav=function(){TweenMax.to("#line1",bpc.animTime,{rotation:0,ease:Linear.easeNone,delay:0}),TweenMax.to("#line3",bpc.animTime,{rotation:0,ease:Linear.easeNone,delay:0}),TweenMax.to("#line2",0,{alpha:1,ease:Quart.easeOut,delay:bpc.animTime}),TweenMax.to("#line1",bpc.animTime,{y:-8,ease:Quart.easeOut,delay:bpc.animTime}),TweenMax.to("#line3",bpc.animTime,{y:8,ease:Quart.easeOut,delay:bpc.animTime}),e(".main-nav").removeClass("mobile-open")},bpc.updateMenu=function(){e(".main-nav .main-menu ul li").each(function(){const i=e(this).attr("data-validVersions");-1===(""===i?[5]:i.split(",").map(e=>parseInt(e,10))).indexOf(bpc.majorPixiVersion)?e(this).addClass("invalid"):e(this).removeClass("invalid")})},bpc.updateMenu(),e(".main-header .hamburger").on(bpc.clickType,i=>(i.preventDefault(),e(".main-nav").hasClass("mobile-open")?bpc.closeMobileNav():bpc.openMobileNav(),!1)),""!==window.location.hash){const i=window.location.hash.replace("#/","").split("/");i.length>1&&e(`.main-menu .section[data-section="${i[0]}"]`).length>0&&(e(`.main-menu .section[data-section="${i[0]}"]`).trigger(bpc.clickType),e(`.main-menu .section[data-section="${i[0]}"]`).next().find(`li[data-src="${i[1]}"]`).length>0&&e(`.main-menu .section[data-section="${i[0]}"]`).next().find(`li[data-src="${i[1]}"]`).trigger(bpc.clickType))}else e(".main-menu .section").eq(0).trigger(bpc.clickType),e(".main-menu li").eq(0).trigger(bpc.clickType);e(".select-group").on(bpc.clickType,function(){e(this).find(".select").hasClass("open")?(e(this).find(".select").removeClass("open"),e(this).find("ul").slideUp(150)):(e(this).find(".select").addClass("open"),e(this).find("ul").slideDown(150))}),e(".select-group .select").on(bpc.clickType,"li",function(){e(this).hasClass("selected")||(e(".select-group .select li.selected").removeClass("selected"),e(this).addClass("selected"),e(".select-group .select .current").text(e(this).text()),bpc.pixiVersionString=e(this).attr("data-val"),bpc.majorPixiVersion=getMajorPixiVersion(bpc.pixiVersionString),window.history.pushState(bpc.pixiVersionString,null,`?v=${bpc.pixiVersionString}${window.location.hash}`),bpc.updateMenu(),bpc.generateIFrameContent(),e(".main-content").animate({scrollTop:0},200))}),e(".footer .download").on(bpc.clickType,()=>{bpc.SaveToDisk(bpc.exampleUrl,bpc.exampleFilename)}),e(".reload").on(bpc.clickType,()=>{bpc.exampleSourceCode=bpc.editor.getValue(),bpc.generateIFrameContent()})},bpc.SaveToDisk=function(e,i){if(window.ActiveXObject){if(window.ActiveXObject&&document.execCommand){const t=window.open(e,"_blank");t.document.close(),t.document.execCommand("SaveAs",!0,i||e),t.close()}}else{const t=document.createElement("a");t.href=e,t.target="_blank",t.download=i||"unknown";const a=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});t.dispatchEvent(a),(window.URL||window.webkitURL).revokeObjectURL(t.href)}},bpc.init=function(){e(window).resize(bpc.resize),bpc.loadScriptsAsync()},bpc.init()});